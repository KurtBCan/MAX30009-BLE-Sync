Controller and Node code. Some lines/comments cleaned from version used for thesis results, but functionality has not changed.
